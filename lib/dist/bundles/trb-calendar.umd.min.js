!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/common"),require("@angular/cdk/overlay"),require("@angular/cdk/portal"),require("rxjs"),require("date-fns"),require("@angular/core")):"function"==typeof define&&define.amd?define("trb-calendar",["exports","@angular/common","@angular/cdk/overlay","@angular/cdk/portal","rxjs","date-fns","@angular/core"],t):t(e["trb-calendar"]={},e.ng.common,e.ng.cdk.overlay,e.ng.cdk.portal,e.rxjs,e.fns,e.ng.core)}(this,function(e,n,a,s,t,i,r){"use strict";var o=function(){function e(e,t){this.template=e,this.viewContainer=t,this.click=new r.EventEmitter}return Object.defineProperty(e.prototype,"trbCalendarCell",{set:function(e){if(e)this.viewContainer.createEmbeddedView(this.template,{$implicit:e})},enumerable:!0,configurable:!0}),e.prototype.onClick=function(e){this.click.emit(e)},e.decorators=[{type:r.Directive,args:[{selector:"[trbCalendarCell]"}]}],e.ctorParameters=function(){return[{type:r.TemplateRef},{type:r.ViewContainerRef}]},e.propDecorators={trbCalendarCell:[{type:r.Input}],click:[{type:r.Output}],onClick:[{type:r.HostListener,args:["click",["$event"]]}]},e}(),l=function(){function e(e,t){this.value=e,this.calendar=t,this.months=[];var n=i.addHours(new Date(e+"-01-01"),12);this.months.push(this.calendar.factory.createMonth(n,this,t));for(var a=0;a<12;a++)n=i.startOfMonth(i.addMonths(n,1)),this.months.push(this.calendar.factory.createMonth(n,this,t))}return e.prototype.previousMonth=function(e){return 0<e.ofYear?e.year.months[e.ofYear-1]:this.calendar.getPreviousMonth(e)},e.prototype.nextMonth=function(e){return e.ofYear<11?e.year.months[e.ofYear+1]:this.calendar.getNextMonth(e)},e.prototype.getMonth=function(e){return this.months[e]},e}(),c=function(){function r(e,t,n){this.date=e,this.year=t,this.calendar=n,this.days=[],this.ofYear=i.getMonth(e),this.name=i.format(e,"MMMM"),this.days.push(n.factory.createDay(e));for(var a=0;a<i.getDaysInMonth(e)-1;a++)e=i.addDays(e,1),this.days.push(n.factory.createDay(e))}return r.prototype.setDay=function(t){var e=this.days.findIndex(function(e){return e.date===t.date});0<=e&&this.days.splice(e,1,t)},r.prototype.getCalendarView=function(){var e=this.days.slice(),t=this.days[0].dayOfWeek,a=this.calendar.config.month;if(t!==a.firstDay){var n=this.year.previousMonth(this);e=n.days.slice(n.days.length-(t-a.firstDay+7)%7,n.days.length).concat(e)}if(e.length<r.DAYS_IN_CALENDAR_VIEW){var o=this.year.nextMonth(this).days.slice(0,r.DAYS_IN_CALENDAR_VIEW-e.length);e=e.concat(o)}else if(e.length>r.DAYS_IN_CALENDAR_VIEW){o=this.year.nextMonth(this).days.slice(0,r.DAYS_IN_CALENDAR_VIEW+7-e.length);e=e.concat(o)}return e.reduce(function(e,t,n){return t.dayOfWeek!==a.firstDay&&0!==n||e.push([]),a.hideWeekends&&t.isWeekend||!e[e.length-1]||e[e.length-1].push(t),e},new Array)},r.DAYS_IN_CALENDAR_VIEW=35,r}(),d=function(){function e(e,t){void 0===t&&(t=!1),this._date=e,this.disabled=t,this.date=i.format(e,"YYYY-MM-DD"),this.name=i.format(e,"dddd"),this.dayOfMonth=i.getDate(e),this.dayOfWeek=i.getDay(e)}return Object.defineProperty(e.prototype,"isWeekend",{get:function(){return i.isWeekend(this._date)},enumerable:!0,configurable:!0}),e}(),h=function(){function e(){}return e.prototype.createYear=function(e,t){return new l(e,t)},e.prototype.createMonth=function(e,t,n){return new c(e,t,n)},e.prototype.createDay=function(e){return new d(e)},e}(),p=function G(e){void 0===e&&(e=!0),this.linkedMonths=e},u=function J(e,t,n,a){void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===n&&(n=0),void 0===a&&(a=!1),this.hideWeekends=e,this.hideDaysOutsideMonth=t,this.firstDay=n,this.showTwoCalendarIfNeed=a},f=function Q(e,t){void 0===e&&(e=new p),void 0===t&&(t=new u),this.header=e,this.month=t},g=function(){function e(e,t){void 0===e&&(e=new h),void 0===t&&(t=new f),this.factory=e,this.config=t,this.years=[]}return e.prototype.recalculate=function(){var t=this,e=this.years.slice();this.years=[],e.map(function(e){return t.getYear(e.value)})},e.prototype.setDaysPayload=function(e){var t=this;e.forEach(function(e){return t.setDay(e.date,e.payload)})},e.prototype.setDay=function(e,t){var n=new Date(e),a=i.getYear(n),o=i.getMonth(n);this.getYear(a).getMonth(o).setDay(t)},e.prototype.getYear=function(t){var e=this.years.find(function(e){return e.value===t});return e||(e=this.factory.createYear(t,this),this.years.push(e)),e},e.prototype.getCurrentYear=function(){var e=i.getYear(new Date);return this.getYear(e)},e.prototype.getPreviousMonth=function(e){return this.getYear(e.year.value-1).months[11]},e.prototype.getNextMonth=function(e){return this.getYear(e.year.value+1).months[0]},e}(),y={unset:"unset",startRangeSelected:"startRangeSelected",rangeSelected:"rangeSelected",picked:"picked"},b=function(){function e(e,t,n,a){this.date=e,this.year=t,this.month=n,this.selectionChange=a}return Object.defineProperty(e.prototype,"label",{get:function(){return i.format(this.date,"MMMM YYYY")},enumerable:!0,configurable:!0}),e.prototype.labelWithConfig=function(e){return e?e[i.getMonth(this.date)]+" "+i.getYear(this.date):this.label},e.prototype.addMonth=function(){var e=this.date;this.date=i.addMonths(this.date,1),this.update(e)},e.prototype.addYear=function(){var e=this.date;this.date=i.addYears(this.date,1),this.update(e)},e.prototype.minusMonth=function(){var e=this.date;this.date=i.subMonths(this.date,1),this.update(e)},e.prototype.minusYear=function(){var e=this.date;this.date=i.subYears(this.date,1),this.update(e)},e.prototype.setMonthAndYear=function(e){var t=i.getMonth(e),n=i.getYear(e),a=this.date;this.date=i.setMonth(this.date,t),this.date=i.setYear(this.date,n),this.update(a)},e.prototype.update=function(e){this.year=i.getYear(this.date),this.month=i.getMonth(this.date),this.selectionChange.emit({previous:e,current:this.date})},e}(),m=function(){function e(e,t,n,a){this.needTwoMonthView=e,this.from=t,this.to=n,this._monthSelectionChange=a;var o=new Date;if(t||(this.from=new b(o,i.getYear(o),i.getMonth(o),this.monthSelectionChange)),!n){var r=i.addMonths(o,1);this.to=new b(r,i.getYear(r),i.getMonth(r),this.monthSelectionChange)}}return Object.defineProperty(e.prototype,"monthSelectionChange",{get:function(){return this._monthSelectionChange},set:function(e){this._monthSelectionChange=e,this.from.selectionChange=e,this.to.selectionChange=e},enumerable:!0,configurable:!0}),e}(),C=function(){function e(){this.calendarMonthView=new m(!1),this.name="simple"}return e.prototype.isInRange=function(e,t){return!1},e.prototype.isSelected=function(t,e){return e.selectedDates.some(function(e){return e===t})},e.prototype.change=function(e,t){0===t.selectedDates.length||t.selectedDates[0]!==e?(t.selectedDates=[],t.selectedDates=[e]):t.selectedDates=[]},e}(),w=function(){function e(e,t,n,a,o){void 0===e&&(e=new C),void 0===t&&(t=[]),void 0===n&&(n=y.unset),void 0===a&&(a=new r.EventEmitter),void 0===o&&(o=new r.EventEmitter),this.strategy=e,this.selectedDates=t,this.status=n,this.selectionChange=a,this.monthSelectionChange=o,this.strategy.calendarMonthView.monthSelectionChange=this.monthSelectionChange}return Object.defineProperty(e.prototype,"calendarMonthView",{get:function(){return this.strategy.calendarMonthView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.strategy.name},enumerable:!0,configurable:!0}),e.prototype.setStrategy=function(e){this.strategy=e,this.selectedDates=[],this.strategy.calendarMonthView.monthSelectionChange=this.monthSelectionChange},e.prototype.getStrategy=function(){return this.strategy},e.prototype.isInRange=function(e){return this.strategy.isInRange(e,this)},e.prototype.isSelected=function(e){return this.strategy.isSelected(e,this)},e.prototype.change=function(e){this.strategy.change(e,this),this.selectionChange.emit(this)},e.prototype.from=function(){return this.selectedDates.length?this.selectedDates[0]:""},e.prototype.to=function(){return 1<this.selectedDates.length?this.selectedDates[this.selectedDates.length-1]:""},e}(),x=function(){function e(){this.calendarMonthView=new m(!0),this.name="range"}return e.prototype.isInRange=function(t,e){var n=e.selectedDates.findIndex(function(e){return e===t});return 0<n&&n<e.selectedDates.length-1},e.prototype.isSelected=function(t,e){var n=e.selectedDates.findIndex(function(e){return e===t});return e.selectedDates.length&&(0===n||n===e.selectedDates.length-1)},e.prototype.change=function(e,t){if(t.status===y.unset)t.selectedDates.push(e),t.status=y.startRangeSelected;else if(t.status===y.startRangeSelected){var n=i.parse(t.selectedDates[0]),a=i.parse(e),o=i.compareDesc(n,a);if(0===o)t.selectedDates=[],t.status=y.unset;else if(o<0)t.selectedDates=[],t.selectedDates.push(e);else if(0<o){for(;n=i.addDays(n,1),t.selectedDates.push(i.format(n,"YYYY-MM-DD")),0<i.compareDesc(n,a););t.status=y.rangeSelected}}else t.selectedDates=[],t.status=y.unset},e}(),v=function(){function e(){this.calendarMonthView=new m(!0),this.name="pick"}return e.prototype.isInRange=function(e,t){return!1},e.prototype.isSelected=function(t,e){return e.selectedDates.some(function(e){return e===t})},e.prototype.change=function(t,e){var n=e.selectedDates.findIndex(function(e){return e===t});0<=n?e.selectedDates.splice(n,1):e.selectedDates.push(t)},e}(),M=function(e,t){return(M=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function k(e,t){function n(){this.constructor=e}M(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var D=function(){return(D=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},S=function Z(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0),this.linkedMonths=e,this.pastMonths=t},I=function ee(e,t,n,a,o,r,i,s,l){void 0===e&&(e=!1),void 0===t&&(t=!0),void 0===n&&(n=!1),void 0===a&&(a=0),void 0===r&&(r=[]),void 0===i&&(i=3),void 0===s&&(s=!0),void 0===l&&(l=!0),this.hideWeekends=e,this.hideDaysOutsideMonth=t,this.showTwoCalendarIfNeed=n,this.firstDay=a,this.monthLabels=o,this.dayLabels=r,this.dayLength=i,this.showChangeYearButton=s,this.showChangeMonthButton=l},Y=function(r){function t(e,t,n,a){void 0===e&&(e=new S),void 0===t&&(t=new I),void 0===n&&(n="simple"),void 0===a&&(a="trb");var o=r.call(this,e,t)||this;return o.header=e,o.month=t,o.selection=n,o.stylePrefix=a,o}return k(t,r),t.from=function(e){return this.copyObject(e,new t)},t.copyObject=function(t,n){var a=this;return n=Object.assign({},n),Object.keys(t).forEach(function(e){a.assign(t[e],n,e)}),n},t.assign=function(e,t,n){e instanceof Array?t[n]=e:e instanceof Object?t[n]=this.copyObject(e,t[n]):t[n]=e},t}(f),O=function te(){},P=function(r){function e(e,t,n,a){void 0===n&&(n=!1),void 0===a&&(a=!1);var o=r.call(this,i.parse(e))||this;return o.payload=t,o.selected=n,o.disabled=a,o}return k(e,r),e}(d),R=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return k(t,e),t.prototype.createDay=function(e,t,n){return new P(i.format(e),t,n)},t}(h),E=function(){function e(e,t){this.template=e,this.viewContainer=t}return e.decorators=[{type:r.Directive,args:[{selector:"[trbCalendarMonth]"}]}],e.ctorParameters=function(){return[{type:r.TemplateRef},{type:r.ViewContainerRef}]},e}(),j=function(){function e(){this.selection=new w,this.dates=[],this.config=new Y,this.selectionChange=this.selection.selectionChange,this.monthSelectionChange=this.selection.monthSelectionChange}return Object.defineProperty(e.prototype,"classes",{get:function(){return this.config.stylePrefix+"-calendar"},enumerable:!0,configurable:!0}),e.prototype.ngDoCheck=function(){},e.prototype.ngOnInit=function(){this.calendar=new g(new R,this.config),this.updateSelection()},e.prototype.ngOnChanges=function(e){var t=this,n=e.config;this.calendar&&(this.calendar.recalculate(),this.dates.forEach(function(e){t.calendar.setDay(e.date,new P(e.date,e.payload,e.selected,e.disabled))}),n&&(this.calendar.config=this.config,this.updateSelection()))},e.prototype.updateSelection=function(){var t=this;switch(this.config.selection){case"simple":this.singleSelection();break;case"range":this.rangeSelection();break;case"picked":this.pickSelection()}this.calendar.recalculate(),this.dates.forEach(function(e){t.calendar.setDay(e.date,new P(e.date,e.payload,e.selected,e.disabled))})},e.prototype.cellClicked=function(e){e.selected=!e.selected},e.prototype.getPayload=function(t){var e=this.dates.find(function(e){return e.date===t.date});return e?e.payload:undefined},e.prototype.dateIncluded=function(t){return this.dates.some(function(e){return e.date===t})},e.prototype.singleSelection=function(){this.selection.setStrategy(new C)},e.prototype.rangeSelection=function(){this.selection.setStrategy(new x)},e.prototype.pickSelection=function(){this.selection.setStrategy(new v)},e.prototype.getMonthContext=function(e){return{index:e,calendar:this.calendar,selection:this.selection,config:this.config,monthSelection:0===e?this.selection.calendarMonthView.from:this.selection.calendarMonthView.to}},e.decorators=[{type:r.Component,args:[{selector:"trb-calendar",template:'<ng-container *ngIf="monthTemplate || calendarMonth else defaultMonths">\n    <ng-container *ngTemplateOutlet="monthTemplate || calendarMonth; context: { $implicit : getMonthContext(0) }">\n    </ng-container>\n\n    <ng-container *ngTemplateOutlet="monthTemplate || calendarMonth; context: { $implicit : getMonthContext(1) }">\n    </ng-container>\n</ng-container>\n\n<ng-template #defaultMonths>\n    <trb-calendar-month [context]="getMonthContext(0)">\n    </trb-calendar-month>\n\n    <trb-calendar-month *ngIf="selection.calendarMonthView.needTwoMonthView && calendar.config.month.showTwoCalendarIfNeed"\n        [context]="getMonthContext(1)">\n    </trb-calendar-month>\n</ng-template>\n',encapsulation:r.ViewEncapsulation.None,styles:["*{font-family:sans-serif;color:#333;font-size:14px}.price{color:green;font-size:10px}.trb-calendar-arrow{border:solid #666;border-width:0 2px 2px 0;display:inline-block;padding:4px}.trb-calendar-arrow.trb-calendar-arrow-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.trb-calendar-arrow.trb-calendar-arrow-left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.clickeable{cursor:pointer}.trb-calendar{display:flex;flex-wrap:wrap}.trb-calendar-month{margin:0 10px}.trb-calendar-header{height:16px}.trb-calendar-header .trb-calendar-header-buttons{padding:0 12px}.trb-calendar-row{display:flex}.trb-calendar-day-labels{padding:4px 0;font-size:12px}.trb-calendar-day-labels .day-label{flex:1;position:relative;text-align:center;padding:8px 0}.trb-calendar-cell{font-family:ProximaNova,sans-serif;position:relative;min-width:38px;min-height:38px;text-align:center;display:block;line-height:30px;align-items:center}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled) .overlay{background:#e4e7e7;width:100%;height:100%;top:0;left:0;position:absolute;opacity:.1}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled) .overlay:hover{background:#666;cursor:pointer}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month){background-color:#17a45f}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month) .label,.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month) .my-price{color:#fff}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month).trb-calendar-cell-selection-range.trb-calendar-cell-from{border-top-left-radius:4px;border-bottom-left-radius:4px}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month).trb-calendar-cell-selection-range.trb-calendar-cell-to{border-top-right-radius:4px;border-bottom-right-radius:4px}.trb-calendar-cell.trb-calendar-cell-past .label{color:rgba(0,0,0,.1)}.trb-calendar-cell.trb-calendar-cell-in-range:not(.trb-calendar-cell-outside-month){background-color:#d3ecd3}.trb-calendar-cell.trb-calendar-cell-disabled{background-color:#ccc;cursor:not-allowed}.trb-calendar-cell.trb-calendar-cell-disabled .label{color:rgba(0,0,0,.1)}",""]}]}],e.propDecorators={dates:[{type:r.Input}],config:[{type:r.Input}],selectionChange:[{type:r.Output}],monthSelectionChange:[{type:r.Output}],monthTemplate:[{type:r.Input}],calendarMonth:[{type:r.ContentChild,args:[E,{read:r.TemplateRef}]}],classes:[{type:r.HostBinding,args:["class"]}]},e}(),T=function(){function e(){this.monthSelections=[],this.showTwoMonths=!1,this.monthIndex=0,this.linkedMonths=!0}return Object.defineProperty(e.prototype,"classes",{get:function(){return this.context.stylePrefix+"-calendar-header"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonClasses",{get:function(){return this.classes+"-buttons"},enumerable:!0,configurable:!0}),e.prototype.showPastMonth=function(){return this.context.pastMonths||!this.isCurrentMonth()},e.prototype.isCurrentMonth=function(){var e=new Date;return i.getMonth(e)===this.context.monthSelections[this.context.monthIndex].month&&i.getYear(e)===this.context.monthSelections[this.context.monthIndex].year},e.prototype.minusYear=function(e){this.linkedMonths?this.monthSelections.forEach(function(e){return e.minusYear()}):this.monthSelections[e].minusYear()},e.prototype.minusMonth=function(e){this.linkedMonths?this.monthSelections.forEach(function(e){return e.minusMonth()}):this.monthSelections[e].minusMonth()},e.prototype.addYear=function(e){this.linkedMonths?this.monthSelections.forEach(function(e){return e.addYear()}):this.monthSelections[e].addYear()},e.prototype.addMonth=function(e){this.linkedMonths?this.monthSelections.forEach(function(e){return e.addMonth()}):this.monthSelections[e].addMonth()},e.prototype.ngOnChanges=function(e){if(e.context){var t=this.context;this.linkedMonths=t.linkedMonths,this.monthIndex=t.monthIndex,this.monthSelections=t.monthSelections,this.showTwoMonths=t.showTwoMonths,this.monthLabels=t.monthLabels}},e.decorators=[{type:r.Component,args:[{selector:"trb-calendar-header",template:'<trb-calendar-header-buttons\n    [class]="buttonClasses"\n    type="back"\n    *ngIf="!showTwoMonths || monthIndex === 0 || !linkedMonths"\n    (monthClick)="minusMonth(0)"\n    (yearClick)="minusYear(0)"\n    [stylePrefix]="context.stylePrefix"\n    [showChangeMonthButton]="context.showChangeMonthButton && showPastMonth()"\n    [showChangeYearButton]="context.showChangeYearButton">\n</trb-calendar-header-buttons>\n\n<span class="filler"></span>\n\n<span class="label" *ngIf="monthSelections && monthSelections.length">\n    {{ monthSelections[monthIndex].labelWithConfig(monthLabels) }}\n</span>\n\n<span class="filler"></span>\n\n<trb-calendar-header-buttons\n    [class]="buttonClasses"\n    *ngIf="!showTwoMonths || monthIndex === 1  || !linkedMonths"\n    type="forward"\n    (monthClick)="addMonth(0)"\n    (yearClick)="addYear(0)"\n    [stylePrefix]="context.stylePrefix"\n    [showChangeMonthButton]="context.showChangeMonthButton"\n    [showChangeYearButton]="context.showChangeYearButton">\n</trb-calendar-header-buttons>\n',styles:[":host{position:relative;width:100%;display:flex}.filler{flex:1 1 auto}.label{position:absolute;left:50%;flex:0 1 auto;-webkit-transform:translateX(-50%);transform:translateX(-50%)}"]}]}],e.propDecorators={context:[{type:r.Input}],monthSelections:[{type:r.Input}],showTwoMonths:[{type:r.Input}],monthIndex:[{type:r.Input}],linkedMonths:[{type:r.Input}],monthLabels:[{type:r.Input}],classes:[{type:r.HostBinding,args:["class"]}]},e}(),A=function(o){function a(e,t,n,a){return o.call(this,e,t,n,a)||this}return k(a,o),a.from=function(e,t){var n=new a(e.date,e.payload,e.selected,e.disabled);return Object.keys(t).forEach(function(e){n[e]=t[e]}),n},a}(P),V=function(){function e(e,t){this.template=e,this.viewContainer=t}return e.decorators=[{type:r.Directive,args:[{selector:"[trbCalendarHeader]"}]}],e.ctorParameters=function(){return[{type:r.TemplateRef},{type:r.ViewContainerRef}]},e}(),_=function(){function e(){}return Object.defineProperty(e.prototype,"classes",{get:function(){return this.config.stylePrefix+"-calendar-month"},enumerable:!0,configurable:!0}),e.prototype.getCellData=function(e){return A.from(e,{selection:this.selection,monthSelection:this.monthSelection,hideDaysOutsideMonth:this.calendar.config.month.hideDaysOutsideMonth,stylePrefix:this.config.stylePrefix})},e.prototype.getHeaderData=function(){return{monthLabels:this.config.month.monthLabels,monthIndex:this.index,pastMonths:this.config.header.pastMonths,showTwoMonths:this.selection.calendarMonthView.needTwoMonthView&&this.calendar.config.month.showTwoCalendarIfNeed,linkedMonths:this.config.header.linkedMonths,monthSelections:[this.selection.calendarMonthView.from,this.selection.calendarMonthView.to],stylePrefix:this.config.stylePrefix,showChangeMonthButton:this.config.month.showChangeMonthButton,showChangeYearButton:this.config.month.showChangeYearButton}},e.prototype.ngOnChanges=function(e){e.context&&(this.calendar=this.context.calendar,this.index=this.context.index,this.selection=this.context.selection,this.monthSelection=this.context.monthSelection,this.config=this.context.config),this.dayLabelsRowClass={},this.rowClass={},this.dayLabelsRowClass[this.config.stylePrefix+"-calendar-row"]=!0,this.dayLabelsRowClass[this.config.stylePrefix+"-calendar-day-labels"]=!0,this.rowClass[this.config.stylePrefix+"-calendar-row"]=!0},e.decorators=[{type:r.Component,args:[{selector:"trb-calendar-month",template:'\n<ng-container *ngIf="calendarHeader else defaultHeader">\n    <ng-container *ngTemplateOutlet="calendarHeader.template; context: { $implicit: getHeaderData()}">\n    </ng-container>\n</ng-container>\n\n<ng-template #defaultHeader>\n    <trb-calendar-header [context]="getHeaderData()">\n    </trb-calendar-header>\n</ng-template>\n\n<ng-container *ngIf="calendar.getYear(monthSelection.year).months[monthSelection.month].getCalendarView() as calendarView">\n    <div [ngClass]="dayLabelsRowClass">\n        <trb-calendar-day-header-cell class="day-label" *ngFor="let day of [0,1,2,3,4,5,6]" [day]="day" [dayLabels]="config.month.dayLabels"\n            [dayLength]="config.month.dayLength">\n        </trb-calendar-day-header-cell>\n    </div>\n\n    <div [ngClass]="rowClass" *ngFor="let week of calendarView; index as i">\n\n        <ng-container *ngFor="let day of week">\n\n            <ng-container *ngIf="calendarCell else defaultCell">\n                <ng-container *ngTemplateOutlet="calendarCell.template; context: { $implicit: getCellData(day) }">\n                </ng-container>\n            </ng-container>\n\n            <ng-template #defaultCell>\n                <trb-calendar-cell [context]="getCellData(day)"></trb-calendar-cell>\n            </ng-template>\n\n        </ng-container>\n    </div>\n</ng-container>',styles:["*{font-family:sans-serif;color:#333;font-size:14px}.price{color:green;font-size:10px}.trb-calendar-arrow{border:solid #666;border-width:0 2px 2px 0;display:inline-block;padding:4px}.trb-calendar-arrow.trb-calendar-arrow-right{transform:rotate(-45deg);-webkit-transform:rotate(-45deg)}.trb-calendar-arrow.trb-calendar-arrow-left{transform:rotate(135deg);-webkit-transform:rotate(135deg)}.clickeable{cursor:pointer}.trb-calendar{display:flex;flex-wrap:wrap}.trb-calendar-month{margin:0 10px}.trb-calendar-header{height:16px}.trb-calendar-header .trb-calendar-header-buttons{padding:0 12px}.trb-calendar-row{display:flex}.trb-calendar-day-labels{padding:4px 0;font-size:12px}.trb-calendar-day-labels .day-label{flex:1;position:relative;text-align:center;padding:8px 0}.trb-calendar-cell{font-family:ProximaNova,sans-serif;position:relative;min-width:38px;min-height:38px;text-align:center;display:block;line-height:30px;align-items:center}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled) .overlay{background:#e4e7e7;width:100%;height:100%;top:0;left:0;position:absolute;opacity:.1}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled) .overlay:hover{background:#666;cursor:pointer}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month){background-color:#17a45f}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month) .label,.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month) .my-price{color:#fff}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month).trb-calendar-cell-selection-range.trb-calendar-cell-from{border-top-left-radius:4px;border-bottom-left-radius:4px}.trb-calendar-cell:not(.trb-calendar-cell-past):not(.trb-calendar-cell-disabled).trb-calendar-cell-selected:not(.trb-calendar-cell-outside-month).trb-calendar-cell-selection-range.trb-calendar-cell-to{border-top-right-radius:4px;border-bottom-right-radius:4px}.trb-calendar-cell.trb-calendar-cell-past .label{color:rgba(0,0,0,.1)}.trb-calendar-cell.trb-calendar-cell-in-range:not(.trb-calendar-cell-outside-month){background-color:#d3ecd3}.trb-calendar-cell.trb-calendar-cell-disabled{background-color:#ccc;cursor:not-allowed}.trb-calendar-cell.trb-calendar-cell-disabled .label{color:rgba(0,0,0,.1)}",""]}]}],e.propDecorators={classes:[{type:r.HostBinding,args:["class"]}],context:[{type:r.Input}],calendar:[{type:r.Input}],index:[{type:r.Input}],selection:[{type:r.Input}],monthSelection:[{type:r.Input}],config:[{type:r.Input}],calendarCell:[{type:r.ContentChild,args:[o]}],calendarHeader:[{type:r.ContentChild,args:[V]}]},e}(),L=function(){function e(){this.styles={}}return Object.defineProperty(e.prototype,"classes",{get:function(){var t=this;return Object.keys(this.styles).filter(function(e){return t.styles[e]}).join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selection",{get:function(){return this.context.selection},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var t=this;if(this.context){var e=new Date,n=this.context.date===i.format(new Date,"YYYY-MM-DD");this.dateStatus={selected:this.isSelected(),from:this.selection.from()===this.context.date,to:this.selection.to()===this.context.date,"in-range":this.isInRange()||this.isSelected(),past:0<i.compareDesc(i.parse(this.context.date),e)&&!n,"outside-month":i.getMonth(this.context.date)!==this.context.monthSelection.month,today:n,"has-payload":this.context.payload!==undefined,host:!0,"selection-simple":"simple"===this.context.selection.name,"selection-range":"range"===this.context.selection.name,"selection-pick":"pick"===this.context.selection.name,disabled:this.context.disabled};var a=this.context.stylePrefix;this.styles[a+"-calendar-cell"]=!0,Object.keys(this.dateStatus).forEach(function(e){t.styles[a+"-calendar-cell-"+e]=t.dateStatus[e]})}},e.prototype.isSelected=function(){return this.selection.isSelected(this.context.date)},e.prototype.isInRange=function(){return this.selection.isInRange(this.context.date)},e.prototype.onClick=function(){this.context.disabled||this.selection.change(this.context.date)},e.decorators=[{type:r.Component,args:[{selector:"trb-calendar-cell",template:'<ng-container *ngIf="!context.hideDaysOutsideMonth || !dateStatus[\'outside-month\']">\n    <div class="overlay" (click)="onClick()"></div>\n    <span class="label">{{ context.dayOfMonth }}</span>\n    <ng-content></ng-content>\n</ng-container>'}]}],e.propDecorators={context:[{type:r.Input}],classes:[{type:r.HostBinding,args:["class"]}]},e}(),B=function(){function e(){this.dayLength=3,this.daysInWeek=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}return e.decorators=[{type:r.Component,args:[{selector:"trb-calendar-day-header-cell",template:'\n    <ng-container *ngIf="dayLabels.length > 0 else defaultDays">\n        {{ dayLabels[day] | slice:0:dayLength }}\n    </ng-container>\n\n    <ng-template #defaultDays>\n        {{ daysInWeek[day] | slice:0:dayLength }}\n    </ng-template>\n    '}]}],e.propDecorators={day:[{type:r.Input}],dayLabels:[{type:r.Input}],dayLength:[{type:r.Input}]},e}(),H=function(){function e(){this.showChangeYearButton=!0,this.showChangeMonthButton=!0,this.yearClick=new r.EventEmitter,this.monthClick=new r.EventEmitter,this.leftArrowClasses="",this.rightArrowClasses=""}return e.prototype.ngOnChanges=function(e){e.stylePrefix&&(this.leftArrowClasses=this.stylePrefix+"-calendar-arrow "+this.stylePrefix+"-calendar-arrow-left",this.rightArrowClasses=this.stylePrefix+"-calendar-arrow "+this.stylePrefix+"-calendar-arrow-right")},e.decorators=[{type:r.Component,args:[{selector:"trb-calendar-header-buttons",template:'<ng-container *ngIf="type === \'back\'">\n\n    <span (click)="yearClick.emit()" *ngIf="showChangeYearButton">\n        <i [class]="leftArrowClasses"></i>\n        <i [class]="leftArrowClasses"></i>\n    </span>\n\n    <span (click)="monthClick.emit()" *ngIf="showChangeMonthButton">\n        <i [class]="leftArrowClasses"></i>\n    </span>\n</ng-container>\n\n<ng-container *ngIf="type === \'forward\'">\n    <span (click)="monthClick.emit()" *ngIf="showChangeMonthButton">\n        <i [class]="rightArrowClasses"></i>\n    </span>\n\n    <span (click)="yearClick.emit()" *ngIf="showChangeYearButton">\n        <i [class]="rightArrowClasses"></i>\n        <i [class]="rightArrowClasses"></i>\n    </span>\n</ng-container>\n',styles:["\n    :host span {\n        cursor: pointer;\n        padding: 0 6px;\n    }\n    "]}]}],e.propDecorators={type:[{type:r.Input}],showChangeYearButton:[{type:r.Input}],showChangeMonthButton:[{type:r.Input}],stylePrefix:[{type:r.Input}],yearClick:[{type:r.Output}],monthClick:[{type:r.Output}]},e}(),N=function(n){function e(e){var t=n.call(this)||this;return t.overlayRef=e,t}return k(e,n),e.prototype.close=function(e){return e&&this.next(e),this.overlayRef.dispose(),this.asObservable()},e}(t.Subject),W=new r.InjectionToken("PICKER_DATA"),$={hasBackdrop:!0,backdropClass:"dark-backdrop",panelClass:"tm-file-preview-dialog-panel",data:null},q=function(){function e(e,t){this.injector=e,this.overlay=t}return e.prototype.open=function(e,t,n,a){void 0===e&&(e={});var o=D({},$,e),r=this.createOverlay(o,t),i=new N(r),s=this.attachDialogContainer(r,o,i,n,a);return i.instance=s,r.backdropClick().subscribe(function(e){return i.close()}),i},e.prototype.createOverlay=function(e,t){var n=this.getOverlayConfig(e,t);return this.overlay.create(n)},e.prototype.getOverlayConfig=function(e,t){var n=this.overlay.position().flexibleConnectedTo(t).withPositions([{originX:"start",overlayX:"start",originY:"bottom",overlayY:"top"}]);return new a.OverlayConfig({hasBackdrop:e.hasBackdrop,backdropClass:e.backdropClass,panelClass:e.panelClass,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:n})},e.prototype.attachDialogContainer=function(e,t,n,a,o){var r=this.createInjector(t,n,o),i=new s.ComponentPortal(a,null,r);return e.attach(i).instance},e.prototype.createInjector=function(e,t,n){void 0===n&&(n=null);var a=new WeakMap;return a.set(N,t),a.set(W,e.data),a.set(r.TemplateRef,n),new s.PortalInjector(this.injector,a)},e.decorators=[{type:r.Injectable}],e.ctorParameters=function(){return[{type:r.Injector},{type:a.Overlay}]},e}(),z=function(){function e(){}return e.decorators=[{type:r.NgModule,args:[{imports:[n.CommonModule,a.OverlayModule],providers:[q]}]}],e}(),F=function(){function e(e,t,n){this.pickerRef=e,this.data=t,this.calendarRef=n,this.preventClose=!1,this.data.calendarConfig=Object.assign(X.calendarConfig,t.calendarConfig),this.data.stylePrefix=t.stylePrefix||X.stylePrefix,this.data.dates=t.dates||X.dates,this.data.datesSelected=t.datesSelected||X.datesSelected}return Object.defineProperty(e.prototype,"classes",{get:function(){return this.data.stylePrefix+"-datepicker"},enumerable:!0,configurable:!0}),e.prototype.onSelectionChange=function(e){var t=this;if(!this.preventClose)switch(this.calendar.config.selection){case"simple":setTimeout(function(){t.pickerRef.close({form:e.from(),to:undefined,selectedDates:e.selectedDates})},600);break;case"range":e.to()&&setTimeout(function(){t.pickerRef.close({from:e.from(),to:e.to(),selectedDates:e.selectedDates})},600)}},e.prototype.ngAfterContentInit=function(){},e.prototype.ngAfterViewInit=function(){var t=this;this.preventClose=!0,this.data.datesSelected.forEach(function(e){return t.calendar.selection.change(e)}),this.data.datesSelected.length&&setTimeout(function(){var e=i.parse(t.data.datesSelected[0]);t.calendar.selection.calendarMonthView.from.setMonthAndYear(e),t.calendar.selection.calendarMonthView.to.setMonthAndYear(i.addMonths(e,1))}),setTimeout(function(){t.preventClose=!1})},e.decorators=[{type:r.Component,args:[{selector:"trb-datepicker",template:'    <trb-calendar\n        #calendar\n        [dates]="data.dates"\n        [config]="data.calendarConfig" \n        (selectionChange)="onSelectionChange($event)" \n        [monthTemplate]="calendarRef">\n    </trb-calendar>\n',encapsulation:r.ViewEncapsulation.None,styles:[".trb-datepicker{margin-top:8px;padding:16px;border-radius:2px;background:#fff;box-shadow:0 2px 8px 0 #ccc}"]}]}],e.ctorParameters=function(){return[{type:N},{type:undefined,decorators:[{type:r.Inject,args:[W]}]},{type:r.TemplateRef}]},e.propDecorators={calendar:[{type:r.ViewChild,args:[j]}],classes:[{type:r.HostBinding,args:["class"]}]},e}(),X={calendarConfig:Y.from({selection:"range"}),datesSelected:[],dates:[],stylePrefix:"trb"},K=function(){function e(e,t){this.elementRef=e,this.pickerService=t,this.config=X,this.selectionChange=new r.EventEmitter,this.monthSelectionChange=new r.EventEmitter,this.close=new r.EventEmitter}return e.prototype.toggle=function(){var t=this,e=this.pickerService.open({data:this.config},this.elementRef,F,this.monthRef);this.datepicker=e.instance,e.instance.calendar.selectionChange.subscribe(function(e){return t.selectionChange.emit(e)}),e.instance.calendar.monthSelectionChange.subscribe(function(e){return t.monthSelectionChange.emit(e)}),e.subscribe(function(e){t.close.emit(e)})},e.prototype.ngOnChanges=function(e){e.dates&&this.dates&&this.datepicker&&(this.datepicker.data.dates=this.dates)},e.decorators=[{type:r.Directive,args:[{selector:"[trb-datepicker-toggle]"}]}],e.ctorParameters=function(){return[{type:r.ElementRef},{type:q}]},e.propDecorators={monthRef:[{type:r.Input,args:["trb-datepicker-toggle"]}],config:[{type:r.Input}],dates:[{type:r.Input}],selectionChange:[{type:r.Output}],monthSelectionChange:[{type:r.Output}],close:[{type:r.Output}],toggle:[{type:r.HostListener,args:["click"]}]},e}(),U=function(){function t(){}return t.forRoot=function(e){return{ngModule:t,providers:[{provide:"config",useValue:e}]}},t.decorators=[{type:r.NgModule,args:[{declarations:[j,o,V,E,L,_,B,T,H,F,K],exports:[j,o,V,E,L,_,B,T,H,F,K,z],imports:[n.CommonModule,z],entryComponents:[j,F],providers:[],bootstrap:[]}]}],t}();e.TrbCalendarModule=U,e.CalendarComponent=j,e.CalendarCellComponent=L,e.DayHeaderCellComponent=B,e.DatepickerComponent=F,e.DEFAULT_DATEPICKER_DATA=X,e.CalendarHeaderComponent=T,e.CalendarHeaderButtonsComponent=H,e.CalendarMonthComponent=_,e.CalendarCellDirective=o,e.CalendarHeaderDirective=V,e.CalendarMonthDirective=E,e.PickerToggleDirective=K,e.MonthSelection=b,e.CalendarMonthSelection=m,e.CalendarViewConfig=Y,e.ICalendarViewConfig=O,e.CalendarHeaderConfig=S,e.MonthViewConfig=I,e.CalendarSelection=w,e.SelectionType={single:"single",range:"range",multirange:"multirange",pick:"pick"},e.SelectionStatus=y,e.PickSelectionStrategy=v,e.RangeSelectionStrategy=x,e.SingleSelectionStrategy=C,e.ɵe=Y,e.ɵi=S,e.ɵj=I,e.ɵf=f,e.ɵg=p,e.ɵh=u,e.ɵa=W,e.ɵb=N,e.ɵd=z,e.ɵc=q,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=trb-calendar.umd.min.js.map